from .app.models import * # noqa
import anvil.server
import anvil.secrets

# https://wooldridge-law1.mycase.com
# RhVWPWDzP43FNQmQ
# rs75miSiB5JtGZd8vzsexAua3tSfiypH

PMAPP_API_ORIGIN = 'https://dd2scido6vqpf3xb.anvil.app/UFWI73RUL6AQM3I2K32OXEHW/_/api'


@anvil.server.http_endpoint('/my-case/auth', methods=['GET', 'POST'])
def auth(**params):
    print(f"method: {anvil.server.request.method}\n"
          f"headers: {anvil.server.request.headers}\n"
          f"params: {params}\n")

    tenant_uid = params.get('state', None)
    print('tenant_uid', tenant_uid)

    return anvil.server.HttpResponse(200, f'OK')


# headers = {
#     'Authorization': f"Basic {str(base64.b64encode(bytes(f'{XERO_API_CLIENT_ID}:{XERO_API_CLIENT_SECRET}', 'utf-8')), 'ascii')}",
#      'Content-Type': 'application/x-www-form-urlencoded'
# }
# body = f'grant_type=authorization_code&code={urllib.parse.quote(xero_oauth_code)}&' \
#        f'redirect_uri={urllib.parse.quote(XERO_OAUTH_REDIRECT_URL, safe="")}'

'''
{
    "access_token": "eyJhbGciOiJSUzI1NiJ9.eyJzdWIiOiJhZTdmZDA4Zi1iYmYxLTQ2ZTMtOWZlYi03M2I3NzNiOWNhYjMiLCJzY29wZXMiOlsiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfY2FsbF9sb2ciLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9jYXNlcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX2NvbnRhY3RzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfY3VzdG9tX2ZpZWxkcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX2RvY3VtZW50cyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX2V2ZW50cyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX2V4cGVuc2VzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfaW52b2ljZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9sZWFkcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX21lc3NhZ2VzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfbm90ZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9zdGFmZiIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX3Rhc2tzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfd2ViaG9va3MiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfY2FsbF9sb2ciLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfY2FzZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfY29udGFjdHMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfY3VzdG9tX2ZpZWxkcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd193cml0ZV9kb2N1bWVudHMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfZXZlbnRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX2V4cGVuc2VzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX2ludm9pY2VzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX2xlYWRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX21lc3NhZ2VzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX25vdGVzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX3Rhc2tzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX3dlYmhvb2tzIl0sIm1pZCI6ImJmMjEzNWIxLTg0YzItNGVkMy05OGM4LTYzMWI0YzhkZGI4ZSIsImV4cCI6MTcwNzI2NDAxOSwiY2xpZW50X2lkIjoiUmhWV1BXRHpQNDNGTlFtUSIsImlhdCI6MTcwNzE3NzYxOSwicGVyc2lzdGVuY2VfdG9rZW4iOiJkMWI1MDE5MTM4Nzg0NDZjOTVjYzY0ZWY3YzRmOGQwNjgwNmU3M2ZmOTlkM2IyZjk5OTQ0ODI0NTFlOTY1Y2NjYTliZmM0YWRhOTM0N2YxNjQ3ODdmYzQ0YzMwYjMxZTMzNzQ1OGIwODYwZTI5NWNiNDY4ZjEyYmZiMWFmNmFlMSIsImxvZ2luX2lkIjozOTMxMzEwLCJ1c2VyX2NvdW50IjoxfQ.gWBmIPBOd7GPGCCGcG94hVrpD8Uk2LoWc5_cbzF8SLFJ1IjtIYN2noRXjrQ3mICqQ7Sj8el7EFmC5mJTiqmamTl1Rfywc45684H-4QMt_ETwId6xgZV49DxDyqzZQOvW1v7wtrx7wECXOjLVlTw6rrgeExXpwWZUP36NTbPXYRqnXV08ddo9qSlPy-sEC8-WdRvDvCu0TEd2I07lFeHdHIvgqEMoRXe5Y724IbSx5G39_3jKMzwFO4uBptOdtOEgB0miJYOub4iGArab34Z0_7gYTPdPGetKvZVCcCx0F5CI3YLfu26gtmWubI8SJocviUfErH_Ao6iv-uUXfisU5g",
    "token_type": "Bearer",
    "scope": "firm_client_app_wooldridge_law_read_call_log firm_client_app_wooldridge_law_read_cases firm_client_app_wooldridge_law_read_contacts firm_client_app_wooldridge_law_read_custom_fields firm_client_app_wooldridge_law_read_documents firm_client_app_wooldridge_law_read_events firm_client_app_wooldridge_law_read_expenses firm_client_app_wooldridge_law_read_invoices firm_client_app_wooldridge_law_read_leads firm_client_app_wooldridge_law_read_messages firm_client_app_wooldridge_law_read_notes firm_client_app_wooldridge_law_read_staff firm_client_app_wooldridge_law_read_tasks firm_client_app_wooldridge_law_read_webhooks firm_client_app_wooldridge_law_write_call_log firm_client_app_wooldridge_law_write_cases firm_client_app_wooldridge_law_write_contacts firm_client_app_wooldridge_law_write_custom_fields firm_client_app_wooldridge_law_write_documents firm_client_app_wooldridge_law_write_events firm_client_app_wooldridge_law_write_expenses firm_client_app_wooldridge_law_write_invoices firm_client_app_wooldridge_law_write_leads firm_client_app_wooldridge_law_write_messages firm_client_app_wooldridge_law_write_notes firm_client_app_wooldridge_law_write_tasks firm_client_app_wooldridge_law_write_webhooks",
    "refresh_token": "eyJhbGciOiJSUzI1NiJ9.eyJwYXlsb2FkIjp7InN1YiI6ImFlN2ZkMDhmLWJiZjEtNDZlMy05ZmViLTczYjc3M2I5Y2FiMyIsInNjb3BlcyI6WyJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9jYWxsX2xvZyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX2Nhc2VzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfY29udGFjdHMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9jdXN0b21fZmllbGRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfZG9jdW1lbnRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfZXZlbnRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfZXhwZW5zZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9pbnZvaWNlcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX2xlYWRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfbWVzc2FnZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF9ub3RlcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd19yZWFkX3N0YWZmIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3JlYWRfdGFza3MiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfcmVhZF93ZWJob29rcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd193cml0ZV9jYWxsX2xvZyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd193cml0ZV9jYXNlcyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd193cml0ZV9jb250YWN0cyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd193cml0ZV9jdXN0b21fZmllbGRzIiwiZmlybV9jbGllbnRfYXBwX3dvb2xkcmlkZ2VfbGF3X3dyaXRlX2RvY3VtZW50cyIsImZpcm1fY2xpZW50X2FwcF93b29sZHJpZGdlX2xhd193cml0ZV9ldmVudHMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfZXhwZW5zZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfaW52b2ljZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfbGVhZHMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfbWVzc2FnZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfbm90ZXMiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfdGFza3MiLCJmaXJtX2NsaWVudF9hcHBfd29vbGRyaWRnZV9sYXdfd3JpdGVfd2ViaG9va3MiXSwibWlkIjoiYmYyMTM1YjEtODRjMi00ZWQzLTk4YzgtNjMxYjRjOGRkYjhlIiwiZXhwIjoxNzA3MjY0MDE5LCJjbGllbnRfaWQiOiJSaFZXUFdEelA0M0ZOUW1RIiwiaWF0IjoxNzA3MTc3NjE5LCJwZXJzaXN0ZW5jZV90b2tlbiI6ImQxYjUwMTkxMzg3ODQ0NmM5NWNjNjRlZjdjNGY4ZDA2ODA2ZTczZmY5OWQzYjJmOTk5NDQ4MjQ1MWU5NjVjY2NhOWJmYzRhZGE5MzQ3ZjE2NDc4N2ZjNDRjMzBiMzFlMzM3NDU4YjA4NjBlMjk1Y2I0NjhmMTJiZmIxYWY2YWUxIiwibG9naW5faWQiOjM5MzEzMTAsInVzZXJfY291bnQiOjF9LCJpYXQiOjE3MDcxNzc2MTksImV4cCI6MTcwODM4NzIxOX0.WqwIgZKZikThp0FULxIH__2BODXISJvBb_VZ36x4cAPcrvJ8157QJGpGdyMyo8zLeHav1WDHJYvu8oedVBSQHb1s7tnzjiEjX9dJRlrj_SIICDawaBC_qBjp8URtQgxd-euGSNjPco825AZBoT8bo2wWYjcZtLeGufLaEpmGtqPoU_XNSxbeRsaqbsZ92zt8XlcVfifxiAb8_5tAeTtLCH02dOo-9qqMX9Ya3ha_sgmWYpyHGDLNDI5F7mQOASl8dQdsY8qOuIkNEzZtLsdqwlzHxZ8IsybV3DKNMfx0auFRpiFtRnPADxlCwHd7g52yJjD52SvJhJUSvIRIsdXYxw",
    "expires_in": 86400,
    "firm_uuid": "bf2135b1-84c2-4ed3-98c8-631b4c8ddb8e"
}
'''